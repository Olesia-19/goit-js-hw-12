{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n   const url = 'https://pixabay.com/api/';\n \n   const params = {\n      q: query,\n      page: page,\n      per_page: 15,\n      key: '50329765-c5f06c68786df4859fa5b0c64',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n   };\n \n   const res = await axios.get(url, { params });\n   return res.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loaderEl = document.querySelector('.js-loading-imgs-text');\nexport const loadMoreBtnEl = document.querySelector('.js-load-more-btn');\nexport const galleryEl = document.querySelector('.js-gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function imageTemplate(image) {\n    return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <ul class=\"image-info\">\n              <li class=\"info-item\">\n    <span class=\"info-title\">Likes</span>\n    <span class=\"info-value\">${image.likes}</span>\n  </li>\n  <li class=\"info-item\">\n    <span class=\"info-title\">Views</span>\n    <span class=\"info-value\">${image.views}</span>\n  </li>\n  <li class=\"info-item\">\n    <span class=\"info-title\">Comments</span>\n    <span class=\"info-value\">${image.comments}</span>\n  </li>\n  <li class=\"info-item\">\n    <span class=\"info-title\">Downloads</span>\n    <span class=\"info-value\">${image.downloads}</span>\n  </li>\n          </ul>\n        </li>`\n}\n\nexport function imagesTemplate(images) {\n  return images.map(imageTemplate).join(' ');\n}\n\nexport function refreshLightbox() {\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryEl.innerHTML = '';\n}\n\nexport function showLoader() {\n    loaderEl.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loaderEl.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtnEl.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtnEl.classList.add('hidden');\n}\n\nexport function notifyEndOfResults() {\n  iziToast.info({\n    title: 'Info',\n    message: 'You have reached the end of the results.'\n  });\n}\n\n\n\n\n\n","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n    imageTemplate,\n    imagesTemplate,\n    galleryEl,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    refreshLightbox,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    loadMoreBtnEl,\n    notifyEndOfResults\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.js-form');\n\n\nlet query;\nlet currentPage;\nlet maxPage;\n\n//!======================================================\nformEl.addEventListener('submit', async (e) => {\n    e.preventDefault();\n   \n    query = e.target.elements['search-text'].value.trim();\n    currentPage = 1;\n\n    if (!query) {\n        hideLoadMoreButton();\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Please enter a search term!'\n        });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n\n    let resultImages;\n    try {\n        resultImages = await getImagesByQuery(query, currentPage);\n\n        if (resultImages.hits.length === 0) {\n            iziToast.error({\n                title: 'Oops...',\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            hideLoadMoreButton();\n        } else {\n            const markup = await imagesTemplate(resultImages.hits);\n            galleryEl.innerHTML = markup;\n\n            maxPage = Math.ceil(resultImages.totalHits / 15);\n\n            refreshLightbox();\n            updateLoadMoreButton();\n        }\n        \n    } catch(error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again later.'\n        });\n    } finally {\n        hideLoader();\n    }\n})\n\n//!======================================================\nloadMoreBtnEl.addEventListener('click', async (e) => {\n    currentPage++;\n\n    const resultImages = await getImagesByQuery(query, currentPage);\n\n    const markup = imagesTemplate(resultImages.hits);\n    galleryEl.insertAdjacentHTML('beforeend', markup);\n\n    updateLoadMoreButton();\n    \n    if (currentPage === maxPage) {\n        notifyEndOfResults();\n    }\n})\n\n//!======================================================\nfunction updateLoadMoreButton() {\n    if (!query || currentPage >= maxPage) {\n        hideLoadMoreButton();\n    } else {\n        showLoadMoreButton();\n    }\n  }\n"],"names":["getImagesByQuery","query","page","url","params","axios","loaderEl","loadMoreBtnEl","galleryEl","lightbox","SimpleLightbox","imageTemplate","image","imagesTemplate","images","refreshLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","notifyEndOfResults","iziToast","formEl","currentPage","maxPage","resultImages","markup","updateLoadMoreButton"],"mappings":"owBAEO,eAAeA,EAAiBC,EAAOC,EAAM,CACjD,MAAMC,EAAM,2BAENC,EAAS,CACZ,EAAGH,EACH,KAAMC,EACN,SAAU,GACV,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,EAGG,OADY,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACd,CCZA,MAAME,EAAW,SAAS,cAAc,uBAAuB,EAClDC,EAAgB,SAAS,cAAc,mBAAmB,EAC1DC,EAAY,SAAS,cAAc,aAAa,EAE7D,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAO,CACjC,MAAO;AAAA,0CAC+BA,EAAM,aAAa;AAAA,8CACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+BAKrDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,+BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,+BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,cAI9C,CAEO,SAASC,EAAeC,EAAQ,CACrC,OAAOA,EAAO,IAAIH,CAAa,EAAE,KAAK,GAAG,CAC3C,CAEO,SAASI,GAAkB,CAChCN,EAAS,QAAO,CAClB,CAEO,SAASO,GAAe,CAC3BR,EAAU,UAAY,EAC1B,CAEO,SAASS,GAAa,CACzBX,EAAS,UAAU,OAAO,QAAQ,CACtC,CAEO,SAASY,GAAa,CAC3BZ,EAAS,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASa,GAAqB,CACnCZ,EAAc,UAAU,OAAO,QAAQ,CACzC,CAEO,SAASa,GAAqB,CACnCb,EAAc,UAAU,IAAI,QAAQ,CACtC,CAEO,SAASc,GAAqB,CACnCC,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,0CACb,CAAG,CACH,CCtDA,MAAMC,EAAS,SAAS,cAAc,UAAU,EAGhD,IAAItB,EACAuB,EACAC,EAEJ;AACAF,EAAO,iBAAiB,SAAU,MAAO,GAAM,CAM3C,GALA,EAAE,eAAc,EAEhBtB,EAAQ,EAAE,OAAO,SAAS,aAAa,EAAE,MAAM,OAC/CuB,EAAc,EAEV,CAACvB,EAAO,CACRmB,IACAE,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,6BACrB,CAAS,EACD,MACH,CAEDN,IACAC,IAEA,IAAIS,EACJ,GAAI,CAGA,GAFAA,EAAe,MAAM1B,EAAiBC,EAAOuB,CAAW,EAEpDE,EAAa,KAAK,SAAW,EAC7BJ,EAAS,MAAM,CACX,MAAO,UACP,QAAS,0EACzB,CAAa,EACDF,QACG,CACH,MAAMO,EAAS,MAAMd,EAAea,EAAa,IAAI,EACrDlB,EAAU,UAAYmB,EAEtBF,EAAU,KAAK,KAAKC,EAAa,UAAY,EAAE,EAE/CX,IACAa,GACH,CAEJ,MAAc,CACXN,EAAS,MAAM,CACX,MAAO,QACP,QAAS,+CACrB,CAAS,CACT,QAAc,CACNJ,GACH,CACL,CAAC,EAED;AACAX,EAAc,iBAAiB,QAAS,MAAO,GAAM,CACjDiB,IAEA,MAAME,EAAe,MAAM1B,EAAiBC,EAAOuB,CAAW,EAExDG,EAASd,EAAea,EAAa,IAAI,EAC/ClB,EAAU,mBAAmB,YAAamB,CAAM,EAEhDC,IAEIJ,IAAgBC,GAChBJ,GAER,CAAC,EAED;AACA,SAASO,GAAuB,CACxB,CAAC3B,GAASuB,GAAeC,EACzBL,IAEAD,GAER"}